<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySQL基础-查询, 戚中一">
    <meta name="description" content="写在前面：本文主要记录MySQL查询基础语法的相关内容，包括查询结构和查询顺序等


1. 查询语法-- 书写规范
select repeat_options select_expr   -- 指定查询的字段列表以及是否去重
from tb">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>MySQL基础-查询 | 戚中一</title>
    <link rel="icon" type="image/jpeg" href="/logo.jpg">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 5.4.2"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/logo.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">戚中一</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/logo.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">戚中一</div>
        <div class="logo-desc">
            
            戚中一
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="ttps://github.com/qizhongyizhang" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="ttps://github.com/qizhongyizhang" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySQL基础-查询</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                <span class="chip bg-color">数据库</span>
                            </a>
                        
                            <a href="/tags/MySQL/">
                                <span class="chip bg-color">MySQL</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4/" class="post-category">
                                常见操作指令
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-05-16
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-09-25
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6.2k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    24 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>写在前面：本文主要记录MySQL查询基础语法的相关内容，包括查询结构和查询顺序等</p>
<span id="more"></span>

<h1 id="1-查询语法"><a href="#1-查询语法" class="headerlink" title="1. 查询语法"></a>1. 查询语法</h1><pre class="line-numbers language-none"><code class="language-none">-- 书写规范
select repeat_options select_expr   -- 指定查询的字段列表以及是否去重
from tb_name                        -- 可以通过 as 关键字对表进行重命名，便于书写
[join tb_name on join_condition]    -- 指定表关联方式
where where_condition               -- 进行数据筛选
group by col_name_list              -- 进行数据分组
	having having_condition         -- 对分组后的数据进行筛选
order by col_name_list desc         -- 进行数据排序
limit a[,b]                         -- 进行数据分页，指定数据的展示条数

允许子句 clause&#x2F;子查询 subquery
可以对查询结果进行集合操作：交、并、差 ： union&#x2F;intersect&#x2F;except<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="1-1-语法结构"><a href="#1-1-语法结构" class="headerlink" title="1.1 语法结构"></a>1.1 语法结构</h2><ul>
<li><strong>repeat_options</strong>：面对重复值的选项，有 <strong>all 和 distinct</strong> 两个选项，all：展示全部内容，包括重复值；distinct 去除重复值的所有内容；默认返回的数据不进行去重，多列视为一个元组，整体进行去重</li>
<li><strong>select_expr</strong>：查询列可以是一个列名或表达式，多列之间使用逗号分割；AS(可省略，建议保留)为每一个列指明一个别名，可用于group by，having或 order by子句中，允许通配符 all 或 *；不建议使用<pre class="line-numbers language-none"><code class="language-none">select 1+2    -- 可以使用表达式<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><strong>from</strong>：可以是tb_name或者db_name.tb_name，多表使用逗号分割。AS(可省略，建议保留)为表名起别名。可以不存在表名，使用 dual 作为伪表名，来保证 sql 语法的兼容性（有些服务器要求必须有表名）</li>
<li><strong>where</strong>：用于检索数据（先判断每条记录是否符合条件，符合则可以获取当前记录信息，否则不能获取；条件可由多个条件组合完成（and/or），比较运算产生的结果为1(TRUE)、0 (FALSE)或 NULL）</li>
<li><strong>group by</strong>：根据一个或多个列对结果集进行分组（[GROUP BY {col_name | expr | position} [ASC | DESC], … [WITH ROLLUP]]，分组后，每组内显示一条记录，分组后查询其他字段就只是组内第一条记录的信息，不能准确表示组内所有数据信息，可利用分组字段进行排序显示结果，可以使用多个字段进行分组，每个字段可以设置排序规则，可以使用with rollup 进行组内聚合计算，与聚合函数一起使用，用于统计组内的信息）</li>
<li><strong>having</strong>：对分组结果（group by）进行再次过滤，语法结构与where相似，但having可以使用字段别名（where负责先获得结果，如果需要在结果中再次处理，则使用having再次执行过滤操作，WHERE关键字无法与合计函数一起使用）</li>
<li><strong>order by</strong>：对一列或者多个列对结果进行排序（[ORDER BY {col_name | expr | position}  [ASC | DESC] , …]如果存在多个排序字段，在前一个不能比较出结果后，后边的才起作用，指明升序（asc：ascending）还是降序（desc：descending））</li>
<li><strong>limit</strong>：用于限制被SELECT语句返回的行数（[LIMIT {[offset,] row_count | row_count OFFSET offset}]，从offset索引位置开始获取row_count条记录）</li>
</ul>
<h2 id="1-2-执行顺序"><a href="#1-2-执行顺序" class="headerlink" title="1.2 执行顺序"></a>1.2 执行顺序</h2><h3 id="1-2-1-系统执行顺序"><a href="#1-2-1-系统执行顺序" class="headerlink" title="1.2.1 系统执行顺序"></a>1.2.1 系统执行顺序</h3><p><img src="https://qizhongyi.gitee.io/images/Data/DataBase/MySQL/Data_Select_Order.png" alt="Data_Select_Order"></p>
<p>MySQL可以分为Server层和存储引擎层<br>Server层：连接器、查询缓存区、解析器、优化器、执行器，支持客户端与存储引擎层进行交互<br>存储引擎层：负责数据的存储和提取，架构是插件式</p>
<ol>
<li><strong>连接器</strong>：客户端通过连接器连接上数据库服务端，由连接器负责建立、维持和管理连接，获取权限</li>
<li><strong>缓存区</strong>：查询缓存空间，若有结果，则返回结果；否则进行下一步</li>
<li><strong>解析器</strong>：解析器解析SQL语句，形成解析树：<ul>
<li>先进行<strong>词法分析</strong>：将SQL语句切割成多个字符串，并对字符串进行含义识别，例：select name, age from user where id = ‘xxx’; 会被切割成：select，name，age，from，user，where，id，=，’xxx’这样的9个字符串，识别：select 为查询语句，user为表名</li>
<li>再进行<strong>语法分析</strong>：判断输入的SQL语句是否符合MySQL的SQL语法规则，形成解析树</li>
</ul>
</li>
<li><strong>预处理器</strong>：预处理器进行预处理：判断表名是否存在、用户权限是否足够等，形成新的解析树</li>
<li><strong>优化器</strong>：优化器进行优化：根据解析树形成执行计，选择最优的执行计划执行<ul>
<li>当有多个索引时，决定使用的索引</li>
<li>当进行多表关联时，决定关联顺序</li>
</ul>
</li>
<li><strong>执行器</strong>：根据表的引擎定义，存储引擎提供的查询接口，将磁盘中的数据加载到存储引擎的内存中(Buffer Pool)，获取数据，返回结果</li>
</ol>
<h3 id="1-2-2-语句执行顺序"><a href="#1-2-2-语句执行顺序" class="headerlink" title="1.2.2 语句执行顺序"></a>1.2.2 语句执行顺序</h3><p><strong>语句执行顺序</strong>：from -&gt; on -&gt; join -&gt; where -&gt; group by -&gt; 聚合函数 -&gt; having -&gt; select -&gt; distinct -&gt; order by -&gt; union -&gt; limit</p>
<pre class="line-numbers language-none"><code class="language-none">from:     对查询指定的表计算笛卡尔积；执行顺序为从后往前、从右到左；数据量较大的表尽量放在后面
on:       按照 join_condition 过滤数据
join:     关联外部表获取数据
where:    按照 where_condition 过滤数据；执行顺序为自下而上、从右到左；将能过滤掉最大数量记录的条件写在WHERE字句的最右
group by: 进行分组；执行顺序从右往左，在运行GROUP BY使用WHERE将不需要的记录过滤掉
聚合函数（count-计数；sum-求和；avg-求平均；max-最大值；min-最小值）
having:   按照 having_condition 过滤数据
select:   选择指定列
distinct: 进行去重
order by: 按照 order_condition 过滤数据；执行顺序从左到右，消耗资源
union:    将两个查询的结果拼接到一起
limit:    取出指定数量的记录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h1 id="2-简单样例"><a href="#2-简单样例" class="headerlink" title="2. 简单样例"></a>2. 简单样例</h1><h2 id="2-1-列限定"><a href="#2-1-列限定" class="headerlink" title="2.1 列限定"></a>2.1 列限定</h2><p><strong>检索单列</strong></p>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products;
-- 检索 products 表中 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>检索多列</strong></p>
<pre class="line-numbers language-none"><code class="language-none">select prod_id, prod_name  from products;
-- 检索 products 表中  prod_id、prod_name 列下的数据，多列之间用（,）分隔<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>检索所有列</strong></p>
<pre class="line-numbers language-none"><code class="language-none">select * from products; 
-- 查询 products 表中所有数据，采用通配符星号（*）表示，也可以将所有字段全部 列举额出来；除非特殊需求，一般不建议查询所有列；可以检索出列名未知的列<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>完全限定列名</strong></p>
<pre class="line-numbers language-none"><code class="language-none">select products.prod_name from crashcourse.products; 
-- 检索 products 表中 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="2-2-去重"><a href="#2-2-去重" class="headerlink" title="2.2 去重"></a>2.2 去重</h2><p><strong>去重检索</strong></p>
<pre class="line-numbers language-none"><code class="language-none">select distinct prod_name from products;
-- 检索 products 表中 prod_name 列下的数据，去重展示；默认返回的数据不进行去重<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="2-3-条件过滤"><a href="#2-3-条件过滤" class="headerlink" title="2.3 条件过滤"></a>2.3 条件过滤</h2><p><strong>过滤数据</strong>：根据指定的搜索条件检索所需数据，字符串类型需要引号进行限定，数值类型不需要</p>
<ol>
<li><strong>算术运算符</strong>：=/&lt;/&gt;/!=</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_price &#x3D; 2.5; 
-- 检索 products 表中 prod_price 等于 2.5 时 prod_name 列下的数据

select prod_name from products where prod_price &lt; 2.5; 
-- 检索 products 表中 prod_price 小于 2.5 时 prod_name 列下的数据

select prod_name from products where prod_price &lt;&#x3D; 2.5;
-- 检索 products 表中 prod_price 小于或等于 2.5 时 prod_name 列下的数据

select prod_name from products where prod_price &lt;&gt; 2.5;
-- 检索 products 表中 prod_price 不等于 2.5 时 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="2">
<li><p><strong>逻辑操作符</strong>：多条件过滤，将上文的多重过滤条件进行逻辑组合，支持 AND/&amp;&amp; 操作符和 OR/|| 操作符</p>
<ul>
<li>AND操作符：也可以用 &amp;&amp; 表示，只有前后的条件都满足才能匹配</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where vend_id &#x3D; 1001 and&#x2F;&amp;&amp; prod_price not in (2.5, 3.0);
-- 检索 products 表中 vend_id &#x3D; 1001 并且prod_price 不等于 2.5 且不等于 3.0 时 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>OR操作符：也可以用 || 表示，前后条件满足一个即可匹配</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where vend_id &#x3D; 1001 or&#x2F;|| prod_price not in (2.5, 3.0);
-- 检索 products 表中 vend_id &#x3D; 1001 或者（prod_price 不等于 2.5 且不等于 3.0 ）时 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>XOR操作符：异或，两个条件都满足，则结果为 0；两个条件只满足一个，则结果为 1</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where vend_id &#x3D; 1001 xor prod_price not in (2.5, 3.0);
-- 检索 products 表中仅满足 vend_id &#x3D; 1001 、 prod_price 不等于 2.5 且不等于 3.0 其中一个条件的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>AND 操作符的优先级高于 OR 操作符，在处理 OR 操作符前，优先处理 AND 操作符；可使用 <strong>圆括号</strong> 明确地分组相应的操作符，提高对应运算的优先级</p>
</blockquote>
</li>
<li><p><strong>空值检查</strong>：一个列不包含值时，称其为包含空值NULL</p>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_price IS NULL; 
select prod_name from products where ISNULL( prod_price);
-- 检索 products 表中 prod_price 为空（无值，no value）时 prod_name 列下的数据

select prod_name from products where prod_price IS NOT NULL; 
-- 检索 products 表中 prod_price 不为空时 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="4">
<li><strong>LIKE通配符</strong>：用来匹配值的一部分的特殊字符，支持百分号（%）通配符和下划线（_）通配符；% 匹配任意个字符，包括0个；_ 只能匹配一个字符，代表该位置有且仅有一个字符，通配符可用于匹配字符的任意位置，根据需要进行选择，如 A%c、A%、%c 等；且此时是区分大小写的，ABC 和 ABc 是不同的数据，上文只能匹配 ABc，无法匹配 ABC；尽量不使用通配符，查询效率较低</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_name like &#39;%ABc%&#39;;
-- 检索 products 表中 prod_name 带有 ABc 的 prod_name 列下的数据

select prod_name from products where prod_name like &#39;_ABc_&#39;;
-- 检索 products 表中 prod_name 带有 ABc 且长度为5的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="5">
<li><p><strong>集合运算符</strong></p>
<ul>
<li>范围限定：BETWEEN min AND max：闭区间（大于等于，小于等于：min &lt;= expr &lt;= max）<pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_price between 2.5 and 3.0; 
-- 检索 products 表中 prod_price 大于等于 2.5 并且 小于或等于 3.0 时 prod_name 列下的数据
结果包括指定的开始值和结束值，不同类型的数据库结果对边界值会有差别；相对于操作符，级别效率更高，但边界值不灵活<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
<li><strong>IN操作符</strong>：存在集合内的元素，指定条件范围，范围中的每个条件都可以进行匹配合法值的由逗号分隔的清单，全都括在圆括号中<pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_price in (2.5, 3.0); 
-- 检索 products 表中 prod_price 等于 2.5 或3.0 时 prod_name 列下的数据

select prod_name from products where prod_price not in (2.5, 3.0); 
-- 检索 products 表中 prod_price 不等于 2.5 且不等于 3.0 时 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>Any操作符：任意一个</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">&#x3D; any(数据集合) 相当于in
&lt; any(数据集合) 小于最大值
&gt; any(数据集合) 大于最小值
!&#x3D;any(数据集合) 只要与集合内的一个元素不相等<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>All操作符：所有</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">&#x3D; all(数据集合) 等于集合内的所有元素
&lt; all(数据集合) 小于最小值
&gt; all(数据集合) 大于最大值
!&#x3D;all(数据集合) 相当于not in<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>Some操作符：一些，语法上与any一致，not some() 等价于 !=any()</li>
<li><strong>Exists操作符</strong>：存在，返回一个布尔类型的结果；将外表主查询的数据放入 exists子查询 中进行逐条遍历验证操作，根据验证的 bool结果判断返回外表主查询中满足条件的结果</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select * from tb_a where key in (select key from tb_b);
select * from tb_a where exists (select 1 from tb_b where tb_b.key &#x3D; tb_a.key);
-- in 与 exists 的区别：in 先查询 tb_b，在查询 tb_a；exists 先查询 tb_a，在查询 tb_b；当 tb_a 的数据集小于 tb_b 时，用 exists 优于 in；当 tb_b 的数据集必须小于 tb_a 时，用 in 优于 exists<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
<li><p><strong>NOT操作符</strong>：否定它之后所跟的任何条件，包括集合运算、空值检查、Like通配符等</p>
</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_price IS NOT NULL;
-- 检索 products 表中 prod_price 不为空时 prod_name 列下的数据

select prod_name from products where prod_price not in (2.5, 3.0);
-- 检索 products 表中 prod_price 不等于 2.5 且不等于 3.0 时 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="7">
<li><p><strong>正则表达式</strong>：用来匹配文本的特殊的串（字符集合），使用 REGEXP 关键字进行申明</p>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_name regexp &#39;ABc&#39;;
-- 检索 products 表中 prod_name 带有 ABc 的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>进行OR匹配：搜索两个串其中的一个，用“|”连接</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_name regexp &#39;ABc|ABC&#39;;
-- 检索 products 表中 prod_name 带有 ABc 或 ABC 的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>匹配字符集：自定义匹配字符集，用[]包裹，可用[^]进行否定</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_name regexp &#39;[ABCc]&#39;;
-- 检索 products 表中 prod_name 带有 ABCc其中之一的 prod_name 列下的数据
select prod_name from products where prod_name regexp &#39;[^ABCc]&#39;;
-- 检索 products 表中 prod_name 不带有 ABCc其中任意之一的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>匹配范围：用集合来定义要匹配的一个或多个字符，如 0-9表示 0123456789，a-z表示所有小写字母，A-Z表示所有大写字母；也可以是一部分范围，如1-5，a-d等</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_name regexp &#39;[0-9a-zA-Z]&#39;;
-- 检索 products 表中 prod_name 存在数字或大小写字母的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<table>
<thead>
<tr>
<th align="center">元字符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">[:alnum:]</td>
<td align="center">任意字母和数字（同[a-zA-Z0-9]）</td>
</tr>
<tr>
<td align="center">[:alpha:]</td>
<td align="center">任意字符（同[a-zA-Z]）</td>
</tr>
<tr>
<td align="center">[:blank:]</td>
<td align="center">空格和制表（同[\t]）</td>
</tr>
<tr>
<td align="center">[:cntrl:]</td>
<td align="center">ASCII控制字符（ASCII 0到31和127）</td>
</tr>
<tr>
<td align="center">[:digit:]</td>
<td align="center">任意数字（同[0-9]）</td>
</tr>
<tr>
<td align="center">[:graph:]</td>
<td align="center">与[:print:]相同，但不包括空格</td>
</tr>
<tr>
<td align="center">[:lower:]</td>
<td align="center">任意小写字母（同[a-z]）</td>
</tr>
<tr>
<td align="center">[:print:]</td>
<td align="center">任意可打印字符</td>
</tr>
<tr>
<td align="center">[:punct:]</td>
<td align="center">既不在[:alnum:]又不在[:cntrl:]中的任意字符</td>
</tr>
<tr>
<td align="center">[:space:]</td>
<td align="center">包括空格在内的任意空白字符（同[\f\n\r\t\v]）</td>
</tr>
<tr>
<td align="center">[:upper:]</td>
<td align="center">任意大写字母（同[A-Z]）</td>
</tr>
<tr>
<td align="center">[:xdigit:]</td>
<td align="center">任意十六进制数字（同[a-fA-F0-9]）</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>匹配特殊字符：转义特殊符号的字符，用\进行转义</li>
</ul>
 <pre class="line-numbers language-none"><code class="language-none">select prod_name from products where prod_name regexp &#39;\\.&#39;;
-- 检索 products 表中 prod_name 带有.的 prod_name 列下的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<table>
<thead>
<tr>
<th align="center">元字符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\\f</td>
<td align="center">换页</td>
</tr>
<tr>
<td align="center">\\n</td>
<td align="center">换行</td>
</tr>
<tr>
<td align="center">\\r</td>
<td align="center">回车</td>
</tr>
<tr>
<td align="center">\\t</td>
<td align="center">制表</td>
</tr>
<tr>
<td align="center">\\v</td>
<td align="center">纵向制表</td>
</tr>
</tbody></table>
</li>
</ol>
<h2 id="2-4-分组"><a href="#2-4-分组" class="headerlink" title="2.4 分组"></a>2.4 分组</h2><p><strong>分组数据</strong>：将数据按照 col_name_list分组，进行分类汇总；分组之前必先进行排序，如果顺序错误会导致临时表产生</p>
<p><strong>过滤分组</strong>：通过 having 子句对分组结果进行筛选，用法与where相似；WHERE排除的行不包括在分组中</p>
<pre class="line-numbers language-none"><code class="language-none">select col_name from tb_name group by col_name_list having condition;
-- 将数据按照 col_name_list 进行分组，按照 condition 过滤分组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong>注意事项</strong></p>
<ul>
<li>分组字段遵循最佳左前缀</li>
<li>WHERE 执行顺序高于 HAVING，应该提前在 where处尽量筛选出最少的数据</li>
</ul>
<p>GROUP BY子句可以包含任意数目的列<br>数据在最后规定的分组上进行汇总<br>GROUP BY子句中列出的每个列都必须是检索列或有效的表达式，不能是聚集函数<br>除聚集计算语句外，SELECT语句中的每个列都必须在GROUP BY子句中给出<br>如果分组列中具有NULL值，则NULL将作为一个分组返回<br>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前</p>
<h2 id="2-5-排序"><a href="#2-5-排序" class="headerlink" title="2.5 排序"></a>2.5 排序</h2><p><strong>排序数据</strong>：根据指定列的数据按照一定大小进行排序，<strong>asc升序排序</strong>（从A到Z）或者 <strong>desc 降序排序</strong>（从Z到A），默认为升序；多个排序列也是通过逗号，分隔，优先级按照列名的前后顺序；可以为每个排序字段进行顺序指定；按照数据库的比较规则进行排序，一般默认 a 和 A 大小相同；MySQL实现排序有两种方式：index 索引排序和Using filesort 文件排序；<strong>尽量使用 index 索引排序，避免使用 Using filesort 文件排序</strong>（会创建临时表存储数据，再进行排序）</p>
<p><strong>Using filesort 文件排序实现</strong>：</p>
<ul>
<li><strong>双路排序</strong>：MySQL4.1之前使用双路排序，两次扫描磁盘，最终得到数据：从表中读取行指针和 order by列并进行排序，然后扫描已经排好序的列表，按照列表的数据重新从列表中读取数据输出；<strong>从磁盘读取排序字段，在 buffer中进行排序，再从磁盘获取其他字段</strong></li>
<li><strong>单路排序</strong>：从磁盘读取需要查询的所有列，按照 order by列 在 buffer中进行排序，然后扫描排序后的列表进行输出；避免了第二次读取数据，并且把随机IO变成顺序IO；但把每一行都保存在内存中会消耗更多的空间，可能会因为 sort_buffer的容量小于读取的数据量，导致创建临时表，多路合并，造成多次I/O，会导致性能下降，甚至低于 双路排序算法</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products order by prod_name asc &#x2F; desc;
-- 检索 products 表中 prod_name 列下的数据

select prod_price from products order by prod_price [asc]&#x2F;desc limit 1  -- 查找某列最值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="2-6-分页"><a href="#2-6-分页" class="headerlink" title="2.6 分页"></a>2.6 分页</h2><p><strong>限制结果</strong>：也叫分页</p>
<pre class="line-numbers language-none"><code class="language-none">select prod_name from products limit 5; 
-- 检索 products 表中 prod_name 列下的数据，仅展示5行

select prod_name from products limit 5,10; 
-- 检索 products 表中 prod_name 列下的数据，从第5行开始展示10行，即5~14行；第一行的索引值为0，即 limit 5 &#x3D; limit 0,5 &#x3D; limit 5 offset 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="3-横向连接-JOIN"><a href="#3-横向连接-JOIN" class="headerlink" title="3. 横向连接-JOIN"></a>3. 横向连接-JOIN</h1><p><strong>横向连接</strong>：关联多张表进行查询；没有条件就是笛卡尔积，先进行连接，再判断是否保留，一般大表在左，小表在右；连接表的数量没有限制</p>
<pre class="line-numbers language-none"><code class="language-none">select vend_name, prod_name, prod_price
from vendors, products
where vendors.vend_id &#x3D; products.vend_id
order by vend_name,prod_name

tb_left join tb_right 连接条件
inner&#x2F;outer&#x2F;natural&#x2F;cross&#x2F;Left&#x2F;right join 
where&#x2F;on&#x2F;using() tb_left.Column &#x3D; tb_right.Column；一定要给出连接条件，否则两表进行一一配对，返回结果形成笛卡尔积，浪费资源<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>内连接</strong>：左右两边的数据都存在才能进行连接（内连接），内连接可以省略连接条件：左表的所有数据都要与右表的所有数据进行连接/笛卡尔积连接（M &gt; &gt; N），可以使用 cross join 替代 inner join，默认是 inner join（可省写为join）</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">select vend_name, prod_name, prod_price
from vendors inner join products
on vendors.vend_id &#x3D; products.vend_id
-- 返回 vend_id 同时存在于 vendors 和 products 两张表的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p><strong>外连接</strong>：如果存在左右两边不能匹配的数据，也会进行连接，此时匹配不上的记录用null值填充字段，Mysql暂时不支持全外连接。外连接不能使用where条件，不能省略连接条件</p>
<ul>
<li>左外连接：<strong>left [outer] join</strong> ，保留左表的数据</li>
<li>右外连接：<strong>right [outer] join</strong> ，保留右表的数据</li>
<li>全外连接：<strong>full outer join</strong>，两边的数据都保留，<strong>MySQL不支持全外连接</strong>，可通过 left join union right join 实现</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">select vend_name, prod_name, prod_price
from vendors left&#x2F;right&#x2F;full [outer] join products
on vendors.vend_id &#x3D; products.vend_id

left：返回 vend_id 存在于 vendors 表中的数据，不能匹配的数据置空
right：返回 vend_id 存在于 products 表中的数据，不能匹配的数据置空
full：返回 vend_id 存在于 vendors 和 products 两张表中数据的交集，不能匹配的数据置空
outer 关键字可以省略，连接条件由 on 给出<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>自连接</strong>：左表与右表为同一张表，通过定义别名进行区分</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">select p1.prod_id,p2.prod_name
from products as p1, products as p2
where p1.vend_id &#x3D; p2.vend_id and p2.prod_id &#x3D; &#39;DTNTR&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p><strong>自然连接</strong>：natural left/right join，mysql自动判断连接条件，通过多表的相同字段自动进行连接，且每个表只返回一次；支持内自然连接和外自然连接，重复列只出现一次</p>
<ul>
<li><p><strong>条件过滤</strong>：</p>
<ul>
<li>where：对一一配对好的结果进行过滤，可使用条件表达式</li>
<li>on：连接条件，过滤无效连接，可使用条件表达式，进行连接两表的字段名可以不一致</li>
<li>using：连接条件，去掉结果中的重复字段，并放置在列前，要求进行连接两表的字段名一致</li>
</ul>
</li>
<li><p>内连接可以使用 where、on 和 using 进行条件筛选，外连接只可以使用 using 和 on 进行条件筛选</p>
</li>
</ul>
</li>
</ul>
<p><strong>左右两表公有</strong>：</p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a inner join tb_b on a.key &#x3D; b.key;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>仅包含左表</strong>：左表独有的记录右表对应的字段填充为空</p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a left [outer] join tb_b on a.key &#x3D; b.key;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>仅包含右表</strong>：右表独有的记录左表对应的字段填充为空，<strong>右外连接都可以转换成左外连接</strong></p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a right [outer] join tb_b on a.key &#x3D; b.key;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>仅包含左表独有</strong>：左右两表公有的记录不显示</p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a left [outer] join tb_b on a.key &#x3D; b.key where b.key is null;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>仅包含右表独有</strong>：左右两表公有的记录不显示</p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a right [outer] join tb_b on a.key &#x3D; b.key where a.key is null;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>左右两表所有</strong>：全外连接，</p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a left join tb_b on a.key &#x3D; b.key
union 
select * from tb_a right join tb_b on a.key &#x3D; b.key;

-- select * from tb_a full outer join tb_b on a.key &#x3D; b.key;  -- MySQL 不支持<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>左右两表各自独有</strong>：</p>
<pre class="line-numbers language-none"><code class="language-none">select * from tb_a left join tb_b on a.key &#x3D; b.key where b.key is null
union 
select * from tb_a right join tb_b on a.key &#x3D; b.key  where a.key is null;

-- select * from tb_a full outer join tb_b on a.key &#x3D; b.key where a.key is null or b.key is null;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="4-纵向连接-UNION"><a href="#4-纵向连接-UNION" class="headerlink" title="4. 纵向连接-UNION"></a>4. 纵向连接-UNION</h1><p><strong>纵向连接</strong>：UNION 用于把来自许多 SELECT 语句的结果组合到一个结果集合中</p>
<pre class="line-numbers language-none"><code class="language-none">select vend_id, prod_id, prod_price
from products
where prod_price &lt;&#x3D; 5
union [all]
select vend_id, prod_id, prod_price
from products
where vend_id in (1001,1002);
-- union：去掉重复记录，执行速度慢
-- union all：保留重复记录，执行速度快<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意</strong>：</p>
<blockquote>
<p>要求查询结果的字段数要求一致，字段类型也应一致<br>数据列是根据列的顺序进行匹配，而不是根据列名称；在第一个SELECT语句中被使用的列名称被用于结果的列名称<br>默认使用 DISTINCT 去除重复行，可通过 ALL 关键字申明保留<br>如要对 union 的结果作为整体进行排序或 limit，需要对单个地SELECT语句加圆括号限定范围，在联合后的结果增加 order by 或 limit；order by引用的数据列来自最后一个select<br>分别排序，再联合，则需要用括号将各select语句括起来，且order by只能在limit 出现时才有效</p>
</blockquote>
<h1 id="5-子查询-subquery"><a href="#5-子查询-subquery" class="headerlink" title="5. 子查询-subquery"></a>5. 子查询-subquery</h1><p><strong>子查询</strong>：指的是一个查询语句被其他语句包裹，子查询和外部查询可以是任意表，不要求是同表；子查询总是从内向外处理；子查询可以迭代多次</p>
<pre class="line-numbers language-none"><code class="language-none">select * from (select_result) where condition in (select_result);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="5-1-分类"><a href="#5-1-分类" class="headerlink" title="5.1 分类"></a>5.1 分类</h2><p><strong>返回值分类</strong></p>
<ul>
<li>返回一个标量（单一值）：<strong>标量子查询</strong>，non_subquery_operand comparison_operator (subquery)，获得一个值后进行关系运算符进行运算（=  &gt;  &lt;  &gt;=  &lt;=  &lt;&gt;）</li>
<li>返回一行多列：<strong>行子查询</strong>，在使用时用括号构建对应字段，用运算符进行运算，(字段1，字段2) = （select 字段1，字段2 from 表 limit 1）</li>
<li>返回多行一列：<strong>列子查询</strong>，进行集合运算（in），operand IN|NOT IN/ANY/SOME (subquery)</li>
<li>返回一张表/多行多列：<strong>表子查询</strong>，通常用于from里，需要起别名，（字段1，字段2） = （select 字段1， 字段2 from 表 ）</li>
</ul>
<p><strong>出现位置分类</strong></p>
<ul>
<li><strong>Where型子查询</strong>：where 比较规则 (subquery);</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">select * from employees a
where not exists (
    select emp_no from dept_emp b
    where a.emp_no &#x3D; b.emp_no
);
-- 查找 employees 表中 emp_no 不出现在 dept_emp 表中的所有信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><strong>from型子查询</strong>：from (subquery) as tmp_table;（必须要有[AS] name ，因为FROM子句中的每个表必须有一个名称）</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>子查询必须位于小括号中</li>
<li>子查询外部语句可以是：SELECT, INSERT, UPDATE, DELETE, SET 或 DO</li>
<li>不能在子查询时修改</li>
</ul>
<h1 id="6-校对规则"><a href="#6-校对规则" class="headerlink" title="6. 校对规则"></a>6. 校对规则</h1><p><strong>校对规则</strong>：比较数据的大小关系，进行排序操作；如果参与比较的数据类型不同，则会发生类型转换<br><strong>显示校对规则</strong></p>
<pre class="line-numbers language-none"><code class="language-none">show collation;   -- 显示所有可用的校对，以及它们适用的字符集；区分大小写由_cs表示，不区分大小写由_ci表示
show variables like &#39;character%&#39;;  -- 显示字符集
show variables like &#39;collation%&#39;;  -- 显示排序规则<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><strong>设定字符集</strong></p>
<pre class="line-numbers language-none"><code class="language-none">create table tb_name(
...
)default character set hebrew collate hebrew_general_ci;

可针对列设置字符集
create table tb_name(
...
col_name varchar(10) character set latinl collate latinl_general_ci
)default character set hebrew collate hebrew_general_ci;

临时设置比较规则，COLLATE 还可以用于 GROUP BY、HAVING、聚集函数、别名等
select user_id from user_info order by first_name collate latinl_general_ci desc;

可以使用 Cast() 或 Convert() 函数实现串在字符集之间转换<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">戚中一</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://qizhongyi.gitee.io/202105/1646703.html">https://qizhongyi.gitee.io/202105/1646703.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">戚中一</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                    <span class="chip bg-color">数据库</span>
                                </a>
                            
                                <a href="/tags/MySQL/">
                                    <span class="chip bg-color">MySQL</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">熬夜撸码，来杯咖啡！</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/202105/1728498.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="MySQL-常见问题">
                        
                        <span class="card-title">MySQL-常见问题</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            写在前面：本文主要记录MySQL使用中的常见问题
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-05-17
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="post-category">
                                    常见问题
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                    <a href="/tags/MySQL/">
                        <span class="chip bg-color">MySQL</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/202105/1542888.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/19.jpg" class="responsive-img" alt="MySQL基础-库表数操作">
                        
                        <span class="card-title">MySQL基础-库表数操作</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            写在前面：本文主要介绍MySQL的基础-数据库表、数据相关操作的基础知识
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-05-15
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4/" class="post-category">
                                    常见操作指令
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                    <a href="/tags/MySQL/">
                        <span class="chip bg-color">MySQL</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 戚中一<br />'
            + '文章作者: 戚中一<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('10'),
            headingSelector: 'h1, h2, h3, h4, h5'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2023</span>
            
            <a href="/about" target="_blank">戚中一</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">276.7k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/qizhongyizhang" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:18371879651@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
